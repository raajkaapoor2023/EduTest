<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>QCM — Have + -EN (Sandrine Oriez, Univ. Rennes 2, 2022)</title>
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #1c1f26; color: #f4f4f4; margin: 0; padding: 0; }
    header { background: #2d3240; padding: 20px; text-align: center; }
    header h1 { margin: 0; font-size: 24px; color: #f9d342; }
    .container { max-width: 900px; margin: auto; padding: 20px; }
    .question { background: #2a2f3d; padding: 15px; margin-bottom: 15px; border-radius: 10px; box-shadow: 0px 2px 5px rgba(0,0,0,0.3); }
    .question h3 { margin-top: 0; }
    .options label { display: block; margin: 5px 0; padding: 8px; border-radius: 6px; cursor: pointer; transition: background 0.3s; }
    .options input { margin-right: 8px; }
    .options label:hover { background: #3d4458; }
    button { background: #f9d342; color: #1c1f26; border: none; padding: 10px 18px; border-radius: 8px; cursor: pointer; margin: 5px; font-weight: bold; }
    button:hover { background: #ffd95e; }
    #results { background: #2a2f3d; padding: 20px; border-radius: 10px; margin-top: 20px; display: none; }
    .highlight { background: #444c63; }
  </style>
</head>
<body>
  <header>
    <h1>QCM — HAVE + -EN (Sandrine Oriez, Univ. Rennes 2)</h1>
    <p>Test linguistique (niveau Ivy League / Oxbridge)</p>
  </header>
  <div class="container">
    <div id="quiz"></div>
    <div style="text-align:center; margin-top:20px;">
      <button onclick="validateQuiz()">Valider</button>
      <button onclick="submitQuiz()">Soumettre (fin du test)</button>
    </div>
    <div id="results"></div>
  </div>
  <script>
    // ========================== Données — 60 questions ==========================
    // Chaque question : { id, seq, prompt, choices:[...], answer:idx, explanation }

    const QUESTIONS = [
      // === Séquence 1 — Théorie & invariant (1–12)
      {id:1, seq:1, prompt:"Dans HAVE + -EN, quel est l'invariant sémantique de -EN ?",
        choices:[
          "La simultanéité entre T0 et T1",
          "L’antériorité du procès par rapport au repère T1",
          "La progression interne du procès (en cours)",
          "L'habituation (itératif)"
        ], answer:1,
        explanation:"Dans l'analyse énonciative, -EN code l'antériorité du procès relativement au moment-repère T1. HAVE établit ensuite un lien entre cet antérieur et T1 (localisation sans identification). Cf. Oriez (2022) ; Adamczewski (marqueurs)."},
      {id:2, seq:1, prompt:"Dans HAVE + -EN, que code HAVE ?",
        choices:[
          "Une identification sujet–prédicat (comme BE)",
          "Une rupture modale",
          "Un opérateur de localisation : lien entre l’antérieur et T1",
          "Un simple auxiliaire vide de sens"
        ], answer:2,
        explanation:"HAVE est un opérateur de repérage : il établit un lien entre le procès antérieur (marqué par -EN) et le moment-repère T1. Ce n’est pas une identification (contrairement à BE). Cf. Oriez ; Adamczewski."},
      {id:3, seq:1, prompt:"Combien de temps grammaticaux possède l’anglais dans ce cadre théorique ?",
        choices:["Un seul","Deux : présent et prétérit","Trois : présent, prétérit, futur","Quatre, selon l’aspect"], answer:1,
        explanation:"Dans ce paradigme, il n’y a que deux temps grammaticaux (présent, prétérit). Les autres distinctions viennent des aspects (zéro, BE+-ING, HAVE+-EN). Cf. Oriez."},
      {id:4, seq:1, prompt:"Quel marqueur signale une rupture (temporelle ou modale) entre T0 et T1 ?",
        choices:["-S (présent)","-ED (prétérit)","-ING","Ø (aspect zéro)"], answer:1,
        explanation:"-ED code la rupture : T1 est distinct de T0 (passé ou plan fictif). Cf. Oriez."},
      {id:5, seq:1, prompt:"Dans \"has worked\", où se trouve le marqueur de TEMPS ?",
        choices:["Sur worked","Sur has","Sur le sujet","Il n’y a pas de marqueur temporel"], answer:1,
        explanation:"Le temps (présent) est porté par HAVE (has). L’aspect perfectif est porté par worked (-EN). Cf. Oriez."},
      {id:6, seq:1, prompt:"Le présent perfect implique typiquement :",
        choices:["T1 = T0 (identification)","T1 < T0 (rupture)","T1 > T0 (prospectif)","Absence de repère"], answer:0,
        explanation:"Au présent, T1 (moment-repère) coïncide avec T0 (moment d’énonciation). Cf. Oriez."},
      {id:7, seq:1, prompt:"Le past perfect implique typiquement :",
        choices:["T1 = T0","T1 < T0 (repère passé)","T1 > T0","Un repère modalisé futur"], answer:1,
        explanation:"Avec had, le repère T1 est situé dans le passé par rapport à T0 (rupture). Cf. Oriez."},
      {id:8, seq:1, prompt:"Quel énoncé illustre un point de vue subjectif (présence de S1/T1) ?",
        choices:["Prétérit simple sans repère","Forme simple sans aspect","HAVE + -EN","Impératif"], answer:2,
        explanation:"L'emploi d'une forme aspectuelle (ici HAVE + -EN) signale la présence d’un point de vue subjectif (S1) positionné à T1. Cf. Oriez."},
      {id:9, seq:1, prompt:"Quel double aspect est possible en anglais ?",
        choices:["HAVE + BEEN + -ING","BE + HAVE + -ING","-ING + -ED simultanés sur le verbe lexical","Aucun"], answer:0,
        explanation:"Le perfect progressif combine HAVE + BEEN + V-ING. Cf. Oriez."},
      {id:10, seq:1, prompt:"Le perfect est-il un \"temps composé\" au sens scolaire ?",
        choices:["Oui, purement morphologique","Non : c’est un aspect avec invariant sémantique","Oui, identique au passé composé français","Ni l’un ni l’autre"], answer:1,
        explanation:"Dans l'approche énonciative, HAVE + -EN est un aspect (antériorité + lien), non un simple temps composé. Cf. Oriez ; Larreya."},
      {id:11, seq:1, prompt:"Que signifie T2 chez Oriez ?",
        choices:["Un futur hypothétique","Le moment où le procès est validé (intervalle du procès)","Le sujet expérientiel","La borne de fin de T1"], answer:1,
        explanation:"T2 renvoie au moment de l’énoncé/validation du procès : segment couvrant le déroulement validé. Cf. Oriez."},
      {id:12, seq:1, prompt:"Quel énoncé illustre le rôle de HAVE comme localisation (non-identification) ?",
        choices:["I am a teacher.","I have a red car.","I am my car.","I will be a driver."], answer:1,
        explanation:"HAVE établit un lien de possession/localisation entre le sujet et l’objet (sans identification). Cf. Oriez."},

      // === Séquence 2 — Valeur d’accompli (13–25)
      {id:13, seq:2, prompt:"Choisir l’énoncé qui exprime le mieux l’accompli au présent :",
        choices:["I finish my work.","I have finished my work.","I had finished my work.","I am finishing my work."], answer:1,
        explanation:"La valeur d'accompli (but atteint, borne de fin fermée avant T1) est codée par le présent perfect ici. Cf. Oriez."},
      {id:14, seq:2, prompt:"Dans \"I have marked the papers\", que signifie l'accompli ?",
        choices:["L’action est en cours à T1","L’action est terminée avant T1 mais liée à T1","L’action est prévue après T1","Aucune conséquence"], answer:1,
        explanation:"L’action (corriger) est achevée avant T1, avec pertinence actuelle (copies prêtes, soulagement). Cf. Oriez."},
      {id:15, seq:2, prompt:"Quel repère temporel rend typiquement l’accompli explicite en past perfect ?",
        choices:["Une subordonnée when + prétérit","Une subordonnée if + présent","Un adverbe de fréquence","Un verbe modal"], answer:0,
        explanation:"\"When Rachel arrived\" place T1 au passé ; had + -EN marque l’antériorité accomplie à ce repère. Cf. Oriez."},
      {id:16, seq:2, prompt:"Quel énoncé N'exprime PAS l'accompli ?",
        choices:["He has broken the vase.","They have arrived.","She has been knowing him.","We have completed the task."], answer:2,
        explanation:"Les verbes d’état (know) ne prennent pas le perfect progressif pour exprimer un accompli ; *has been knowing est agrammatical. Cf. distribution aspectuelle."},
      {id:17, seq:2, prompt:"Identifier la meilleure paraphrase de l’accompli : \"I have finished\".",
        choices:["Je finis (maintenant)","J’avais fini (plus tôt dans le récit)","C’est fait / mission accomplie (et c’est pertinent maintenant)","Je finissais (habitude)"], answer:2,
        explanation:"L’accomplissement est antérieur à T1 mais pertinent à T1 : \"c’est fait\". Cf. Oriez."},
      {id:18, seq:2, prompt:"Dans un récit au passé, quel choix maintient l’antériorité par rapport à un repère passé explicite ?",
        choices:["He finished when she arrived.","He had finished when she arrived.","He finishes when she arrived.","He has finished when she arrived."], answer:1,
        explanation:"Past perfect + when PAST maintient l'antériorité du procès par rapport au repère passé. Cf. Oriez."},
      {id:19, seq:2, prompt:"Quel adverbe renforce souvent l’idée d’accompli au présent ?",
        choices:["already","ever","since","usually"], answer:0,
        explanation:"\"Already\" suggère qu’une borne attendue est atteinte avant T1 (accompli)."},
      {id:20, seq:2, prompt:"Choisir la suite logique : \"By the time the meeting started, ...\"",
        choices:["we have prepared everything","we prepared everything","we had prepared everything","we were preparing everything"], answer:2,
        explanation:"\"By the time + past\" appellerait typiquement le past perfect pour marquer l'antériorité accomplie. Cf. Larreya."},
      {id:21, seq:2, prompt:"Quel test diagnostique l’accompli ?",
        choices:["Possibilité d’ajouter \"for two hours\"","Compatibilité avec \"by now / already\"","Obligation d’un verbe d’état","Présence d’un modal"], answer:1,
        explanation:"Les adverbiaux comme \"already, by now\" sont typiques de l’accompli (borne atteinte)."},
      {id:22, seq:2, prompt:"Choisir l’énoncé qui ne viole pas la sélection aspectuelle :",
        choices:["*I have been knowing her.","I have known her since 2020.","*He has been owning the house.","*They have been being tall."], answer:1,
        explanation:"\"Know\" est un verbe d’état compatible avec le perfect (bilan), pas avec le progressif continuatifs agrammaticaux ici."},
      {id:23, seq:2, prompt:"Quel contraste est exact ?",
        choices:["I finished = I have finished (mêmes valeurs)","I had finished situe l’accompli par rapport à un repère passé","I was finished = I had finished","I have finish = correct"], answer:1,
        explanation:"Le past perfect ancre l’antériorité par rapport à un T1 passé (souvent explicité)."},
      {id:24, seq:2, prompt:"Quel énoncé exprime \"mission accomplie\" avec pertinence actuelle ?",
        choices:["We have submitted the article.","We submitted the article (general fact).","We were submitting the article.","We had submit the article."], answer:0,
        explanation:"Présent perfect avec verbe télique exprime la fin atteinte et sa relevance à T1 (article envoyé)."},
      {id:25, seq:2, prompt:"Quel couple correspond à (A) accomplissement antérieur, (B) repère passé ?",
        choices:["(A) had + -EN ; (B) when + present","(A) -EN ; (B) had","(A) -EN ; (B) when + preterit","(A) -ING ; (B) -ED"], answer:2,
        explanation:"(A) -EN marque l’antériorité ; (B) when + prétérit fournit souvent T1 passé."},

      // === Séquence 3 — Valeur explicative (26–36)
      {id:26, seq:3, prompt:"Quelle lecture est prototypique de \"I’ve downloaded a new series, so we can watch one\" ?",
        choices:["Progression en cours","Bilan d’expérience","Explication d’un état présent par un accomplissement antérieur","Prospection"], answer:2,
        explanation:"La cause antérieure (téléchargement accompli) explique la possibilité présente : valeur explicative/reprise de commentaire. Cf. Oriez."},
      {id:27, seq:3, prompt:"Quel marqueur lexical co-apparaît fréquemment avec la valeur explicative ?",
        choices:["so/therefore","ever","since","while"], answer:0,
        explanation:"Les connecteurs causatifs rendent explicite la relation cause→conséquence."},
      {id:28, seq:3, prompt:"Choisir l’option qui illustre une reprise de commentaire :",
        choices:["You’ve parked in my spot; that’s why I’m annoyed.","You were parking in my spot.","You park in my spot.","You had park in my spot."], answer:0,
        explanation:"Perfect + \"that’s why\" relie un fait antérieur à une réaction présente (commentaire)."},
      {id:29, seq:3, prompt:"Quel énoncé est le plus naturel pour justifier un retard ?",
        choices:["I miss the bus.","I missed the bus.","I’ve missed the bus.","I had missed the bus."], answer:2,
        explanation:"Présent perfect pour expliquer une situation présente (retard)."},
      {id:30, seq:3, prompt:"Dans la valeur explicative, quel élément est saillant ?",
        choices:["La borne de début","La durée exacte","Le lien causal vers T1","Le lieu de l’action"], answer:2,
        explanation:"Ce qui compte est l’effet sur T1 (conséquence/justification)."},
      {id:31, seq:3, prompt:"Quel énoncé N’est PAS une explication naturelle au présent ?",
        choices:["The floor is wet because I’ve mopped it.","The door is locked because I’ve lost the key.","I mop the floor because it’s wet.","He can’t enter; he’s forgotten his badge."], answer:2,
        explanation:"I mop… because it’s wet inverse la causalité attendue ici ; les autres sont perfect explicatifs."},
      {id:32, seq:3, prompt:"Quel contraste est exact ?",
        choices:["I broke the vase = I’ve broken the vase (même effet)","I’ve broken the vase met l’accent sur l’effet présent (le vase est cassé)","I had broken the vase est futur","I’ve breaked est correct"], answer:1,
        explanation:"Présent perfect lie l’action à un état/effet actuel. \"Breaked\" est incorrect (broken)."},
      {id:33, seq:3, prompt:"Choisir la meilleure suite : \"Why’s the printer not working? — ...\"",
        choices:["It jammed.","It had jammed.","It’s jammed because I’ve loaded the wrong tray.","It jams."], answer:2,
        explanation:"Justification actuelle typique : perfect explicatif (erreur antérieure → panne présente)."},
      {id:34, seq:3, prompt:"Quel test N’est PAS déterminant pour la valeur explicative ?",
        choices:["Compatibilité avec because/that’s why","Présence d’un résultat actuel","Récence obligatoire (< 5 min)","Lien causal vers T1"], answer:2,
        explanation:"La récence n’est pas nécessaire ; seule la pertinence actuelle compte (lien causal)."},
      {id:35, seq:3, prompt:"Parmi ces paraphrases, laquelle correspond à la valeur explicative ?",
        choices:["Résultat présent dû à un fait antérieur","Action habituelle","Progression sans fin","Contre-factualité"], answer:0,
        explanation:"La valeur explicative justifie un état présent par un accomplissement antérieur."},
      {id:36, seq:3, prompt:"Choisir l’énoncé qui combine accomplissement et commentaire :",
        choices:["We’ve updated the paper, so the reviewers can proceed.","We update the paper.","We had update the paper.","We are updating the paper now, so it’s done."], answer:0,
        explanation:"Perfect + conséquence présente : accompli servant d’explication/justification."},

      // === Séquence 4 — Bilan : intervalle (37–48)
      {id:37, seq:4, prompt:"Quel énoncé exprime un bilan sur intervalle (for/since) avec verbe d’état ?",
        choices:["I know her for years.","I have known her for years.","I was knowing her for years.","I had know her for years."], answer:1,
        explanation:"Le présent perfect est requis pour un état étalé sur un intervalle (for/since). *I know her for… est incorrect. Cf. Oriez."},
      {id:38, seq:4, prompt:"\"Since 2010\" appelle le plus naturellement :",
        choices:["Present perfect (état qui dure jusqu’à T1)","Prétérit simple","BE + -ING systématique","Futur"], answer:0,
        explanation:"\"Since\" + date initiale → état/validité depuis un repère antérieur jusqu’à T1 (present perfect)."},
      {id:39, seq:4, prompt:"Quel énoncé est acceptable ?",
        choices:["*I live here since 2010.","I have lived here since 2010.","I had lived here since 2010 (au présent).","I am living here since 2010."], answer:1,
        explanation:"Le présent perfect est requis. Les autres sont agrammaticaux dans cet emploi."},
      {id:40, seq:4, prompt:"Pour un récit passé : \"By 1999, ... in Paris since 1995\"",
        choices:["we have lived","we lived","we had lived","we are living"], answer:2,
        explanation:"Repère passé (1999) → bilan passé (had lived … since 1995)."},
      {id:41, seq:4, prompt:"Quel test distingue état vs accomplissement ?",
        choices:["Compatibilité avec for/since (états)","Compatibilité avec already (états)","Compatibilité avec will","Compatibilité avec impératif"], answer:0,
        explanation:"Les états se combinent naturellement avec for/since en bilan d’intervalle."},
      {id:42, seq:4, prompt:"Choisir l’option correcte :",
        choices:["She has been knowing French since childhood.","She has known French since childhood.","She knows French since childhood.","She had know French since childhood."], answer:1,
        explanation:"Verbe d’état \"know\" → present perfect pour bilan (non-progressif)."},
      {id:43, seq:4, prompt:"Quel adverbe s’associe le MIEUX à un bilan d’intervalle ?",
        choices:["ever","for three years","by now","already"], answer:1,
        explanation:"\"For three years\" mesure la durée d’un état. \"Ever/already/by now\" sont d’autres valeurs."},
      {id:44, seq:4, prompt:"Compléter : \"She ... in Oxford for a decade by the time she moved.\"",
        choices:["has lived","lived","had lived","was living"], answer:2,
        explanation:"Repère passé (moved) → bilan passé (had lived … for a decade)."},
      {id:45, seq:4, prompt:"Quel énoncé est le MEILLEUR pour un état toujours vrai à T1 ?",
        choices:["He has been tall since 2012.","He has been tall for years.","He was tall since 2012.","He is tall since 2012."], answer:1,
        explanation:"Adjectifs de propriété permanente ne prennent pas en général le progressif ; bilan: has been tall for years (meilleur)."},
      {id:46, seq:4, prompt:"Choisir l’option qui respecte la distribution aspectuelle :",
        choices:["*I have been owning this car since 2018.","I have owned this car since 2018.","I own this car since 2018.","I had own this car since 2018."], answer:1,
        explanation:"\"Own\" (état) → present perfect simple avec for/since."},
      {id:47, seq:4, prompt:"Quel contraste est exact ?",
        choices:["I have lived here (état actuel) vs I lived here (fait passé sans lien)","I lived here = I have lived here","I have lived = futur","I had lived = présent"], answer:0,
        explanation:"Present perfect relie à T1 ; prétérit simple pose une rupture (fait clôturé sans lien)."},
      {id:48, seq:4, prompt:"Compléter : \"They ... friends since school.\"",
        choices:["are","were","have been","had been (au présent)"], answer:2,
        explanation:"Bilan d’intervalle au présent : have been."},

      // === Séquence 5 — Bilan : expérience (49–60)
      {id:49, seq:5, prompt:"Le perfect d’expérience interroge :",
        choices:["la date précise","la quantité/durée exacte","l’existence d’au moins une occurrence antérieure pertinente","la cause nécessaire"], answer:2,
        explanation:"Valeur \"ever/never\" : on s’intéresse au fait d’avoir l’expérience (≥ 1 occurrence), non à \"quand\"."},
      {id:50, seq:5, prompt:"Choisir la question d’expérience la plus naturelle :",
        choices:["Did you ever go to Japan? (au sens d’expérience générale)","Have you ever been to Japan?","Were you ever going to Japan?","Do you ever be to Japan?"], answer:1,
        explanation:"Présent perfect + ever pour l’expérience de vie globale."},
      {id:51, seq:5, prompt:"Quel énoncé exprime un bilan d’expériences (liste non close) ?",
        choices:["I have visited Paris, London, and Rome.","I visited Paris, London, and Rome (dans ma jeunesse).","I had visited Paris (avant 2010).","I am visiting Paris, London, and Rome."], answer:0,
        explanation:"Present perfect cumule des occurrences antérieures liées à T1 (expérience actuelle)."},
      {id:52, seq:5, prompt:"Quel adverbe polarise l’expérience négative ?",
        choices:["never","already","just","since"], answer:0,
        explanation:"\"Never\" (jamais) encode l’absence d’expérience jusqu’à T1."},
      {id:53, seq:5, prompt:"Choisir l’énoncé le plus naturel :",
        choices:["I have gone to the museum (sens \"y être allé\").","I have been to the museum.","I had been to the museum (présent).","I go to the museum ever."], answer:1,
        explanation:"En anglais standard, pour l’expérience de visite, on emploie have been to (et non have gone to)."},
      {id:54, seq:5, prompt:"Compléter : \"It’s the third time he ... that mistake.\"",
        choices:["made","has made","had made","is making"], answer:1,
        explanation:"It’s the Nth time + present perfect pour compter les occurrences jusqu’à T1."},
      {id:55, seq:5, prompt:"Quel énoncé N’est PAS une lecture \"expérience\" ?",
        choices:["I’ve read this book three times.","I’ve never tried sushi.","I have finished my thesis.","Have you ever seen the aurora?"], answer:2,
        explanation:"\"I have finished my thesis\" relève plutôt de l’accompli (mission)."},
      {id:56, seq:5, prompt:"Choisir la meilleure traduction : \"J’ai déjà visité Kyoto.\"",
        choices:["I have already visited Kyoto.","I already visited Kyoto. (général, variétal US possible, mais moins \"expérience de vie\")","I am already visiting Kyoto.","I had already visited Kyoto. (au présent)"], answer:0,
        explanation:"Présent perfect + already pour une expérience antérieure pertinente au présent standard."},
      {id:57, seq:5, prompt:"Quel contraste est exact pour \"been\" vs \"gone\" ?",
        choices:["have gone to = expérience (retour inclus)","have been to = expérience (sous-entend retour)","have been to = être parti et toujours absent","aucune différence"], answer:1,
        explanation:"Have been to signale typiquement l’expérience (le sujet n’est plus sur place). \"Have gone to\" implique souvent qu’il y est allé et peut y être encore/absent."},
      {id:58, seq:5, prompt:"Dans \"Have you ever…?\", que mesure \"ever\" ?",
        choices:["Une borne finale fermée","La continuité ininterrompue","Le domaine de quantification (toute la vie jusqu’à T1)","La cause nécessaire"], answer:2,
        explanation:"\"Ever\" étend le domaine de quantification à l’intervalle maximal (de l’origine à T1)."},
      {id:59, seq:5, prompt:"Compléter : \"This is the first time I ... him speak.\"",
        choices:["hear","heard","have heard","had heard (au présent)"], answer:2,
        explanation:"Construction figée : This is the first/second time + present perfect."},
      {id:60, seq:5, prompt:"Quel énoncé synthétise le mieux l’invariant du perfect ?",
        choices:["Lien causal sans antériorité","Antériorité (-EN) + lien vers T1 (HAVE)","Rupture T1/T0 sans lien","Progression interne pure"], answer:1,
        explanation:"Résumé du cours : -EN antériorise, HAVE relie au repère T1 (présent ou passé). Cf. Oriez; Culioli; Adamczewski; Larreya."}
    ];

    let userAnswers = new Array(questions.length).fill(null);

    function renderQuiz() {
      const quizDiv = document.getElementById('quiz');
      quizDiv.innerHTML = '';
      questions.forEach((q, idx) => {
        let qDiv = document.createElement('div');
        qDiv.className = 'question';
        qDiv.innerHTML = `<h3>Question ${idx+1}: ${q.q}</h3>`;
        let opts = document.createElement('div');
        opts.className = 'options';
        q.options.forEach((opt, oidx) => {
          let label = document.createElement('label');
          label.innerHTML = `<input type="radio" name="q${idx}" value="${oidx}" onchange="userAnswers[${idx}] = ${oidx}"> ${opt}`;
          opts.appendChild(label);
        });
        qDiv.appendChild(opts);
        quizDiv.appendChild(qDiv);
      });
    }

    function validateQuiz() {
      let score = 0;
      let feedback = "";
      questions.forEach((q, idx) => {
        if(userAnswers[idx] !== null){
          if(userAnswers[idx] === q.answer){
            score++;
            feedback += `<p><strong>Question ${idx+1}:</strong> ✔️ Correct. ${q.explanation}</p>`;
          } else {
            feedback += `<p><strong>Question ${idx+1}:</strong> ❌ Incorrect. ${q.explanation}</p>`;
          }
        }
      });
      const resultsDiv = document.getElementById('results');
      resultsDiv.style.display = 'block';
      resultsDiv.innerHTML = `<h2>Évaluation intermédiaire</h2><p>Score actuel: ${score} / ${questions.length}</p>` + feedback;
    }

    function submitQuiz() {
      let score = 0;
      let feedback = "";
      questions.forEach((q, idx) => {
        if(userAnswers[idx] === q.answer){
          score++;
          feedback += `<p><strong>Question ${idx+1}:</strong> ✔️ Correct. ${q.explanation}</p>`;
        } else {
          feedback += `<p><strong>Question ${idx+1}:</strong> ❌ Incorrect. ${q.explanation}</p>`;
        }
      });
      const resultsDiv = document.getElementById('results');
      resultsDiv.style.display = 'block';
      resultsDiv.innerHTML = `<h2>Résultats finaux</h2><p>Score final: ${score} / ${questions.length}</p>` + feedback;
    }

    renderQuiz();
  </script>
</body>
</html>
