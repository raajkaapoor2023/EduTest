<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Linguist Contributions Quiz</title>
<!-- Google Fonts for accessibility -->
<link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet" />
<style>
  body {
    font-family: 'Open Sans', sans-serif;
    background-color: #fff;
    color: #000;
    margin: 0;
    padding: 20px;
    line-height: 1.6;
  }

  h1 {
    text-align: center;
    color: #003366;
  }

  /* Navigation Bar */
  #navBar {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 20px;
  }

  #navBar button {
    margin: 4px;
    padding: 8px 12px;
    border: 2px solid #003366;
    border-radius: 4px;
    background-color: #fff;
    color: #003366;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.2s, color 0.2s;
  }

  #navBar button:hover {
    background-color: #003366;
    color: #fff;
  }

  #navBar button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Question Container */
#questionContainer {
  max-width: 800px;
  margin: auto;
  padding: 20px;
  border: 2px solid #003366;
  border-radius: 8px;
  background-color: #f9f9f9;
}

#questionText {
  font-size: 1.2em;
  margin-bottom: 15px;
}

.answerOptions {
  display: flex;
  flex-direction: column;
}

.answerOptions button {
  margin: 5px 0;
  padding: 10px 15px;
  border: 2px solid #003366;
  border-radius: 4px;
  background-color: #fff;
  color: #000;
  text-align: left;
  cursor: pointer;
  font-size: 1em;
  transition: background-color 0.2s, transform 0.1s;
}

.answerOptions button:hover {
  background-color: #cceeff;
}

.answerOptions button.selected {
  background-color: #3399ff;
  color: #fff;
}

.answerOptions button.correct {
  border-color: #28a745;
  background-color: #d4edda;
  color: #155724;
}

.answerOptions button.incorrect {
  border-color: #dc3545;
  background-color: #f8d7da;
  color: #721c24;
}

/* Navigation Buttons */
#navigationButtons {
  margin-top: 20px;
  display: flex;
  justify-content: space-between;
}

#prevBtn, #nextBtn, #submitBtn, #reviewBtn, #restartBtn {
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  font-size: 1em;
  cursor: pointer;
  transition: background-color 0.2s;
}

#prevBtn:hover, #nextBtn:hover, #submitBtn:hover, #reviewBtn:hover, #restartBtn:hover {
  background-color: #cceeff;
}

#prevBtn:disabled {
  background-color: #e0e0e0;
  cursor: not-allowed;
}

/* Final Score & Review */
#scoreContainer {
  max-width: 900px;
  margin: auto;
  padding: 20px;
  border: 2px solid #003366;
  border-radius: 8px;
  background-color: #f1f1f1;
  display: none;
}

#scoreText {
  font-size: 1.4em;
  margin-bottom: 20px;
  color: #003366;
}

#reviewContainer {
  margin-top: 20px;
  max-height: 400px;
  overflow-y: auto;
  border-top: 1px solid #003366;
  padding-top: 10px;
}

.questionReview {
  border-bottom: 1px solid #ccc;
  padding: 10px 0;
}

.questionReview h3 {
  margin: 0 0 5px 0;
  font-size: 1.1em;
  color: #003366;
}

.explanation {
  margin-top: 5px;
  font-size: 0.95em;
}

/* Responsive adjustments */
@media(max-width: 600px) {
  #questionContainer {
    padding: 10px;
  }
  #navigationButtons {
    flex-direction: column;
  }
  #navigationButtons button {
    width: 100%;
    margin: 5px 0;
  }
}
</style>
</head>
<body>

<h1>Linguist Contributions MCQ Quiz (1870-2020)</h1>

<!-- Navigation Bar -->
<div id="navBar"></div>

<!-- Question Container -->
<div id="questionContainer" role="region" aria-labelledby="questionText">
  <div id="questionText"></div>
  <div class="answerOptions" id="answerOptions"></div>
</div>

<!-- Navigation Buttons -->
<div id="navigationButtons">
  <button id="prevBtn" disabled>Previous</button>
  <button id="nextBtn">Next</button>
  <button id="submitBtn">Finish & Submit</button>
  <button id="reviewBtn" style="display:none;">Review Answers</button>
  <button id="restartBtn" style="display:none;">Restart Quiz</button>
</div>

<!-- Final Score & Review -->
<div id="scoreContainer" aria-hidden="true">
  <div id="scoreText"></div>
  <button id="closeReviewBtn">Close Review</button>
  <div id="reviewContainer"></div>
</div>

<script>
  // Sample Data: Replace with actual questions, explanations, references.
  const questionsData = [
    {
      id: 1,
      text: "Who is considered the father of modern linguistics, known for his work on structuralism?",
      choices: [
        { text: "Ferdinand de Saussure", isCorrect: true },
        { text: "Noam Chomsky", isCorrect: false },
        { text: "William Labov", isCorrect: false },
        { text: " bloomfield", isCorrect: false }
      ],
      explanation: "Ferdinand de Saussure (1857â€“1913) is regarded as the father of modern linguistics, especially for his development of structuralism.",
      reference: "Saussure, F. de (1916). Course in General Linguistics."
    },
    {
      id: 2,
      text: "Which linguist developed the theory of generative grammar?",
      choices: [
        { text: "Noam Chomsky", isCorrect: true },
        { text: "Benjamin Lee Whorf", isCorrect: false },
        { text: "Edward Sapir", isCorrect: false },
        { text: "Leonard Bloomfield", isCorrect: false }
      ],
      explanation: "Noam Chomsky pioneered the theory of generative grammar, revolutionizing linguistic theory since the 1950s.",
      reference: "Chomsky, N. (1957). Syntactic Structures."
    },
    // Add more questions up to 70...
  ];

  // For demo, duplicate to reach 70 questions
  while (questionsData.length < 70) {
    questionsData.push({ ...questionsData[Math.floor(Math.random() * questionsData.length)] });
  }

  // Variables
  let shuffledQuestions = [];
  let currentQuestionIndex = 0;
  let userAnswers = new Array(questionsData.length).fill(null);
  let questionOrder = [];
  let answerShuffles = [];
  let quizFinished = false;

  // DOM Elements
  const navBar = document.getElementById('navBar');
  const questionTextDiv = document.getElementById('questionText');
  const answerOptionsDiv = document.getElementById('answerOptions');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const submitBtn = document.getElementById('submitBtn');
  const reviewBtn = document.getElementById('reviewBtn');
  const restartBtn = document.getElementById('restartBtn');
  const scoreContainer = document.getElementById('scoreContainer');
  const scoreText = document.getElementById('scoreText');
  const reviewContainer = document.getElementById('reviewContainer');
  const closeReviewBtn = document.getElementById('closeReviewBtn');

  // Initialize Quiz
function initQuiz() {
  // Reset variables
  questionOrder = [];
  answerShuffles = [];
  userAnswers = new Array(questionsData.length).fill(null);
  quizFinished = false;

  // Shuffle questions
  for (let i = 0; i < questionsData.length; i++) {
    questionOrder.push(i);
  }
  shuffleArray(questionOrder);

  // For each question, shuffle answer choices
  answerShuffles = questionOrder.map(qIdx => {
    const choices = [...questionsData[qIdx].choices];
    shuffleArray(choices);
    return choices;
  });

  // Build navigation bar
  buildNavBar();

  // Show first question
  currentQuestionIndex = 0;
  displayQuestion(currentQuestionIndex);
  updateNavigationButtons();
  // Hide score/review sections if visible
  scoreContainer.style.display = 'none';
  scoreContainer.setAttribute('aria-hidden', 'true');
  document.getElementById('questionContainer').style.display = 'block';
}

function shuffleArray(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}

// Build navigation bar
function buildNavBar() {
  navBar.innerHTML = '';
  for (let i = 0; i < questionsData.length; i++) {
    const btn = document.createElement('button');
    btn.textContent = i + 1;
    btn.setAttribute('data-index', i);
    btn.onclick = () => {
      currentQuestionIndex = i;
      displayQuestion(i);
      updateNavigationButtons();
    };
    navBar.appendChild(btn);
  }
}

// Display a question
function displayQuestion(index) {
  // Clear previous answer selection
  clearAnswerSelection();

  // Update question text
  const qIdx = questionOrder[index];
  const question = questionsData[qIdx];
  questionTextDiv.textContent = `Q${index + 1}: ${question.text}`;

  // Display answer choices
  answerOptionsDiv.innerHTML = '';
  const choices = answerShuffles[index];
  choices.forEach((choice, i) => {
    const btn = document.createElement('button');
    btn.type = 'button';
    btn.textContent = choice.text;
    btn.setAttribute('data-choice-index', i);
    btn.onclick = () => selectAnswer(index, i);
    // Highlight if previously answered
    if (userAnswers[index] !== null && userAnswers[index] === i) {
      btn.classList.add('selected');
    }
    answerOptionsDiv.appendChild(btn);
  });

  // Update navigation bar button style
  updateNavBar();

  // Enable/disable Prev button
  prevBtn.disabled = index === 0;
  // Enable Next button if not last
  nextBtn.disabled = index === questionsData.length - 1;
}

// Clear previous answer selection
function clearAnswerSelection() {
  Array.from(answerOptionsDiv.children).forEach(btn => {
    btn.classList.remove('selected');
  });
}

// Select an answer
function selectAnswer(qIndex, choiceIdx) {
  userAnswers[qIndex] = choiceIdx;
  // Update button styles
  Array.from(answerOptionsDiv.children).forEach((btn, i) => {
    btn.classList.toggle('selected', i === choiceIdx);
  });
}

// Update navigation bar button styles
function updateNavBar() {
  Array.from(navBar.children).forEach((btn, i) => {
    if (i === currentQuestionIndex) {
      btn.style.backgroundColor = '#3399ff';
      btn.style.color = '#fff';
    } else {
      btn.style.backgroundColor = '';
      btn.style.color = '';
    }
  });
}

// Update Prev/Next buttons
function updateNavigationButtons() {
  prevBtn.disabled = currentQuestionIndex === 0;
  nextBtn.disabled = currentQuestionIndex === questionsData.length - 1;
}

// Event Listeners
document.getElementById('prevBtn').onclick = () => {
  if (currentQuestionIndex > 0) {
    currentQuestionIndex--;
    displayQuestion(currentQuestionIndex);
    updateNavigationButtons();
  }
};
document.getElementById('nextBtn').onclick = () => {
  if (currentQuestionIndex < questionsData.length - 1) {
    currentQuestionIndex++;
    displayQuestion(currentQuestionIndex);
    updateNavigationButtons();
  }
};
document.getElementById('submitBtn').onclick = () => {
  finishQuiz();
};
document.getElementById('reviewBtn').onclick = () => {
  showReview();
};
document.getElementById('restartBtn').onclick = () => {
  initQuiz();
};
document.getElementById('closeReviewBtn').onclick = () => {
  hideReview();
};

// Finish quiz and show score
function finishQuiz() {
  // Calculate score
  let correctCount = 0;
  for (let i = 0; i < questionsData.length; i++) {
    const qIdx = questionOrder[i];
    const correctIdx = questionsData[qIdx].choices.findIndex(c => c.isCorrect);
    if (userAnswers[i] !== null && userAnswers[i] === correctIdx) {
      correctCount++;
    }
  }
  // Show score
  scoreText.innerHTML = `Your score: <strong>${correctCount} / ${questionsData.length}</strong>`;
  // Show review button if not already
  reviewBtn.style.display = 'inline-block';
  // Show final score container
  scoreContainer.style.display = 'block';
  scoreContainer.setAttribute('aria-hidden', 'false');
  // Hide question container
  document.getElementById('questionContainer').style.display = 'none';
}

// Show detailed review
function showReview() {
  scoreContainer.style.display = 'block';
  scoreContainer.setAttribute('aria-hidden', 'false');
  // Populate review
  reviewContainer.innerHTML = '';
  for (let i = 0; i < questionsData.length; i++) {
    const qIdx = questionOrder[i];
    const question = questionsData[qIdx];
    const userAnsIdx = userAnswers[i];
    const correctIdx = question.choices.findIndex(c => c.isCorrect);
    const userCorrect = userAnsIdx === correctIdx;

    const div = document.createElement('div');
    div.className = 'questionReview';

    const qHeader = document.createElement('h3');
    qHeader.textContent = `Q${i + 1}: ${question.text}`;
    div.appendChild(qHeader);

    // Choices with highlights
    question.choices.forEach((c, ci) => {
      const choiceDiv = document.createElement('div');
      choiceDiv.textContent = c.text;
      choiceDiv.style.padding = '4px 8px';
      if (ci === correctIdx) {
        choiceDiv.style.borderLeft = '4px solid #28a745'; // green for correct
        choiceDiv.style.backgroundColor = '#d4edda';
      }
      if (userAnsIdx === ci && ci !== correctIdx) {
        choiceDiv.style.borderLeft = '4px solid #dc3545'; // red for user's wrong
        choiceDiv.style.backgroundColor = '#f8d7da';
      }
      if (ci === userAnsIdx) {
        choiceDiv.style.fontWeight = 'bold';
      }
      div.appendChild(choiceDiv);
    });

    // Explanation and reference
    const expDiv = document.createElement('div');
    expDiv.className = 'explanation';
    expDiv.innerHTML = `
      <strong>Explanation:</strong> ${question.explanation}<br/>
      <em>Reference:</em> ${question.reference}
    `;
    div.appendChild(expDiv);

    reviewContainer.appendChild(div);
  }
  // Show review section
  scoreContainer.style.display = 'block';
  scoreContainer.setAttribute('aria-hidden', 'false');
}

// Hide review and return to quiz
function hideReview() {
  scoreContainer.style.display = 'none';
  scoreContainer.setAttribute('aria-hidden', 'true');
}

// Initialize on page load
window.onload = initQuiz;

</script>
</body>
</html>